
@Scripts.Render("~/Scripts/jsTree")
@Styles.Render("~/Content/jsTree")
@if (Request.IsAuthenticated == false)
{
    Response.Redirect("~/Account/Login");

}

@{
    ViewBag.Title = "Upload";
}

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Message</h1>
            </hgroup>

        </div>
    </section>
}
<html>

<head>
    <meta charset="utf-8">
    <title>jsTree test</title>

    <script type="text/javascript">
        $(function () {
  
            $('#tree').jstree({
                "json_data": {
                    "ajax": {
                        "url": "C:/Windows",
                        "type": "POST",
                        "dataType": "json",
                        "contentType": "application/json charset=utf-8"
                    }
                },
                "core": {
                    "check_callback": true,
                    "themes": {
                        "theme": "media",
                        "dots": true,
                        "icons": true,
                        "variant": "large"
                    }
                },
                "checkbox": {
                    "keep_selected_style": false
                },
                "plugins": ["themes", "json_data", "checkbox", "dnd", "contextmenu", "ui", "crrm"]
            });
            // 7 bind to events triggered on the tree
            $('#tree').on("changed.tree", function (e, data) {
                console.log(data.selected);
            });
            // 8 interact with the tree - either way is OK
            $('button').on('click', function () {
                $('#tree').jstree(true).select_node('child_node_1');
                $('#tree').jstree('select_node', 'child_node_1');
                $.jstree.reference('#tree').select_node('child_node_1');
            });

        });
        function openFile(file) {
            window.location = file;
        }
        $(document).ready(function () {
            $('#MainTree').fileTree({
                root: 'C:/Users/',
                script: '../Scripts/jqueryFileTree.aspx'
            }, function (file) {
                openFile(file);
            });
        });
    </script>

</head>
<body>
    <h2>Files</h2>
    <div id="MainTree"></div>
    
    @using (Html.BeginForm("Upload",
                        "Producer",
                        FormMethod.Post,
                        new { enctype = "multipart/form-data" }))
    {
        <label for="file">Upload File</label>
        <input type="file" name="files" id="file" /><br><br>
        <input type="submit" value="Upload Selected File" />
        <br><br>
        @ViewBag.Message
    }


</body>
</html>  

